<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>WAX + Alcor Login Demo</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: #eee;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 60px;
    }
    button {
      padding: 12px 20px;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      background: #ffcc00;
      color: #000;
      font-weight: bold;
    }
    #status {
      margin-top: 20px;
      font-size: 18px;
    }
  </style>
</head>

<body>
  <h1>WAX + Alcor Login Demo</h1>

  <button onclick="login()">Login with WAX / Alcor</button>

  <div id="status">Not logged in</div>

  <script type="module">
    import {
      SessionKit,
      WalletPluginCloudWallet,
      WalletPluginAnchor
    } from "https://cdn.jsdelivr.net/npm/@wharfkit/session@1.0.0/dist/session.min.js";

    // WAX mainnet chain info
    const chain = {
      id: "1064487b3cd1a897ce03ae5b6a865651747e2e0b2f3f1b4f1c0f8f07f0f88f0f",
      url: "https://wax.greymass.com"
    };

    // Wallet plugins: WAX Cloud Wallet + Anchor (Alcor-compatible)
    const walletPlugins = [
      new WalletPluginCloudWallet(),
      new WalletPluginAnchor()
    ];

    // Create the session kit
    const sessionKit = new SessionKit({
      appName: "WAX Login Demo",
      chains: [chain],
      walletPlugins
    });

    // Login function
    async function login() {
      try {
        const session = await sessionKit.login();

        document.getElementById("status").innerText =
          "Logged in as: " + session.actor.toString();

        console.log("Session:", session);
      } catch (err) {
        console.error(err);
        document.getElementById("status").innerText =
          "Login failed or cancelled";
      }
    }

    // Expose login() to the window
    window.login = login;
  </script>
</body>
</html>
